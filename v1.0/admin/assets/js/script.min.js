jQuery(document).ready(function(t){function e(e,i,n){var o={action:"handle_upload","image-title":e,url:i};t.post(ajaxurl,o,function(e){t("#TB_window .wp-spinner").hide(),a.close(),n&&tb_remove(),location.reload()},"json")}t("body").on("mouseenter",".mode-select ul.attachments li .type-image",function(){t(this).hasClass("js--select-attachment")||t(this).addClass("js--select-attachment")}),t("body").on("mouseenter",".mode-edit ul.attachments li .type-image",function(){t(this).hasClass("js--select-attachment")&&t(this).removeClass("js--select-attachment");var e=t(this).parents(".attachment"),a=e.find(".thumbnail img");("undefined"==typeof a.attr("id")||a.attr("id")!=e.data("id"))&&a.attr("id",e.data("id"));var i='<div class="attachment-overlay" style="background-color:rgba(0,0,0,0.1);width:100%;height:100%;position:absolute;top:0;">';i+='<button class="btn-edit-image wharrf-edit-image" style="margin-top:20px;">Image Editor</button>',i+='<button class="btn-edit-details js--select-attachment" style="margin-top:20px;">Edit Details</button>',i+="</div>",t(this).append(i)}),t("body").on("mouseleave",".mode-edit ul.attachments li .attachment-preview",function(){t(this).find(".attachment-overlay").remove()}),t("body").on("click",".type-image .wharrf-edit-image",function(e){var i=t(this).parents(".attachment"),n=i.find(".thumbnail img");return a.launch({image:n.attr("id"),url:n.attr("src")}),!1});var a=new Aviary.Feather({apiKey:aviary.appkey,tools:"all",onSave:function(a,i){tb_show("Save Image","#TB_inline?width=600&height=200&inlineId=save-image-thickbox"),t("#TB_window").on("click","input[name=send-image-to-server]",function(a){a.preventDefault(),t("#TB_window .wp-spinner").show(),e(t("input[name=image-title]").val(),i,!0)})}})});